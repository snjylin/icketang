协调算法是一个实现细节。React 可以在每个 action 之后对整个应用进行重新道染，得到的最终结果也会是一样的。在 context 下，重新渲染要在所有组件内调用 render 方法，这不代表 React 会卸载或装载它们。React 只会基于以上提到的规则来决定如何进行差异的合并。React 团队定期探索优化算法，让常见用例更高效地执行。在当前的实现中，可以理解为一棵子树能在其兄弟之间移动，但不能移动到其他位置。在这种情況下，算法会重新渲染整棵子树。由于 React 依赖探索的算法，因此当以下假设没有得到满足，性能会有所损耗。

该算法不会尝试匹配不同组件类型的子树。如果你发现你在两种不同类型的组件中切换，但输出非常相似的内容，建议把它们改成同一类型。在实践中，我们没有遇到这类问题。

Key 应该具有稳定，可预测，以及列表内唯一的特质。不稳定的 key（比如通过 Math. Random（）生成的）会导致许多组件实例和 DOM 节点被不必要地重新创建，这可能导致性能下降和子组件中的状态丢失。



