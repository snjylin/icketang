# State拓展

​		在工作中，我们通常会将state数据定义成对象，此时我们是不能直接对state修改的。

​				之前至少有对state直接修改，是因为state是值类型的。因此赋值相当于复制。

​				如果state是引用类型的，我们直接对state修改会导致数据丢失的问题。

​		切换引用类型的state手机共分三步：

​				第一步 定义结果对象：result

​				第二步 用action手机修改result

​				第十三步 将state和result手机合并到一个心对象值（result数据覆盖state）

​				ES提供了Object.assign方法，可以合并多个对象

​		注意：工作中，我们常常在第一步将state数据合并到result中，这样最后一步就可以直接返回result对象了。



action拓展

​		action有三类：静态action，动态action和异步action

静态action

​		静态action就是一个对象

​				type 定义类型

​				其他的属性定义数据

​		我们当前使用的action就是静态action。

​		由于静态action中的数据时固定的，因此适用性不强。

动态action

​		动态action是一个方法

​				参数就是使用的时候，传递的数据

​				返回值时action对象

​						数据等可以通过参数来拼凑

​				由于动态action中的数据是灵活可变的，因此工作中常用。

​		我们在给组件属性对象拓展dispatch方法的时候，还可以拓展更多的方法。

动态action与属性拓展方法相比

​		属性拓展方法污染了组件的属性对象（不建议）

​		动态action么有污染属性对象，并且让我们可以更灵活的使用action，因此工作中常用。

异步action

​		工作中，我们常常会在一个组件中发送异步请求（或者执行其它的异步操作），如果获取的数据要在其它的组件中使用，我们可以将异步请求放在action中，这样的action就是一个异步action。

​		异步action跟动态action类似，也是一个方法

​				参数就是使用方法的时候传递的数据

​				返回值也是一个方法，

​						第一个参数表示dispatch方法

​						在方法中我们发送异步请求，

​						请求返回数据之后，我们再使用dispatch方法提交同步的action（动态action或者静态action）

​				redux模块不支持异步action，想使用异步action要安装redux-thunk中间件插件。

拓展中间件

​		redux模块提供了applyMiddleware方法，可以拓展中间件。

​				参数就是中间件

​				返回值是一个方法，可以用来拓展createStore方法

​				拓展后新的createStore创建的store对象就支持中间件的功能了。

react-quill

​		这是一个富文本编辑器UI框架，我们直接引入就可以使用。

​				npm i quill react-quill

antd-mobile

​		这是一个移动端的UI框架，是由蚂蚁金服团队维护的框架。

​				该ant-design框架包含pc端和移动端。

​		我们主要学习移动端的UI框架：antd-mobile

​		官网：https://ant.design/index-cn

​		移动端官网：https://mobile.ant.design/docs/react/introduce-cn

​		我们主要学习移动端的UI框架，在移动端使用要设置mate标签。

​		该模块没有样式。要手动的引入样式：antd-mobile/dist/antd-mobile.css|less

​		React的UI库的组件命名规范：首字母大写

按需加载

​		在react中，我们使用UI库，react建议我们使用什么组件，引入什么组件。

​				在vue中，使用UI库的时候，建议我们引入全部，统一安装

​		因此在UI库中，一些没有用到的组件就不需要打包了。

​				按需加载

​						在浏览器端，使用什么资源，加载什么资源。（seajs，requirejs）

​				按需打包

​					在开发时候，需要什么资源，打包什么资源。

​				它们都是用了做性能优化的技术。

​		react为按需打包提供了插件：babel-plugin-import插件。

​				babel的插件做options.plugins中配置

​						是一个数组，每一个成员代表一个插件

​								成员可以是字符串，代表插件名称

​								成员还可以是数组，

​										第一个成员代表插件名称

​										第二个成员代表插件配置。

​												libraryName	模块名称

​												style				  样式文件

​						注意：组件一旦被按需打包，样式就会自动的加载进来，不需要手动引入。

Element-React

​		element-react是一个react中pc端的UI框架，提供了大量的组件，方便我们的开发。

​		与element-ui是由同一个团队开发并维护的。因此它们的用法很相似。

​		官网：

​		elment-react没有内置样式，我们要自己安装

​				npm i element-react element-theme-default

​		我们要手动安装样式，样式中包含字体图标，因此要使用url-loader加载机。

​		组件命名规范：组件名称首字母大写。

表单校验

​		三个组件

​				vue		react

​				el-form	Form

​				el-form-item Form.Item（为了使用方便，我们通常将Item解构出来）

​				el-input	Input

​		设置内容

​				1 Input组件设置placeholder属性

​				2 Form.Item组件设置label属性

​				3 Form组件设置labelWidth属性

​		表单校验

​				1 为Input组件实现数据双向绑定。

​				2 为Form组件设置model属性。

​				3 为Form.Item设置prop属性

​				4 设置校验规则：为Form设置rules属性

​						是一个对象

​								key 表示字段名称

​								value 是一个数组，表示校验规则，每一个成员代表一条校验规则

​										require		表示是否是必填的

​										message		出现问题提示的文案

​										trigger			触发校验的事件（不设置，表示一边输入一边触发）

​										validator		校验方法

​		提交表单

​				1 绑定提交事件

​				2 设置ref属性

​				3 使用表单组件的validate方法，校验是否合法。

create-react-app

​		是一款React框架的脚手架，通过该脚手架，我们可以快速的进入开发。

安装

​		npm install -g create-react-app

​		安装完成，会提供create-react-app指令

创建项目

​		指令：create-react-app 项目名称

​		此时需要连接网络。

目录部署

​		node_modules		依赖的模块

​		public						静态资源目录

​				favicon.ico				图标

​				index.html				模版入口文件

​				manifest.json			离线缓存配置文件

​		src								开发目录

​				App.css						应用程序组件样式

​				App.js							应用程序组件脚本

​				App.test.js					应用程序组件单元测试文件

​				index.js						入口脚本文件

​				index.less					全局样式文件

​				logo.svg						react的logo

​				registerServiceWorder.js	web workers 文件

​		.gitignore			git配置

​		package.json		包配置

​		README.md		介绍文件

​		yarn.lock				yarn锁文件



​		create-react-app也是用yarn来维护 的，因此安装模块建议使用yarn指令

​				yarn add react-router-dom react-router redux

​				yarn add 相当于 npm install

​		组件命名规范：首字母大写。

指令

​		start		启动项目的指令

​				默认端口号是3000

​		build		发布项目指令

​				默认会向build目录下发布

​		test		运行单元测试指令

​		eject		发布webpack配置

​				实现功能：

​						将模版文件发布到外部的views目录下

​						将静态资源发布到外面的dist目录下

​		这些指令可以用npm运行，也可以用yarn运行。建议用yarn运行。

pwa应用

​		create-react-app也实现pwa应用。

​		pwa应用：我们可以将网站在计算机桌面创建快捷启动图标，这样以后我们点击图标就能打开页面了。